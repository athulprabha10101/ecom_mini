
{% extends 'customadmin/base.html'%}
{% load static %}
{% block cart-active %}active{% endblock %}



{% block dashboard %}

<style>
    
    .dashboard-text {
      color: white;
    }
  </style>



<div class="col-12 grid-margin">
    <div class="card">
      <div class="card-body">
        <h5>User : {{order.user.name}}</h5>
        <h4 class="card-title" >Order Status</h4>
            <div class="table-responsive">
                <table class="table">
            
                  <th style="color:white;"ead>                
                      <tr>
                        <th style="color:white;" style="color:white;">Items</th>
                        <th style="color:white;" style="color:white;">Quantity</th>
                        <th style="color:white;" style="color:white;">Price</th>
                        <th style="color:white;" style="color:white;">Status</th>
                        <th style="color:white;" style="color:white;">Change status</th>
                        <th style="color:white;" style="color:white;">Current status / requests</th>
                      </tr>
                    </th>
            
              
                  {% for order_detail in order_details %}
                  <form action="{% url 'update_item_status' order_detail.id %}" method="POST" enctype="multipart/form-data">  
                  {% csrf_token %}
                  <tr>
                    <td style="color:white;">{{ order_detail.item.variantname }}</td>
                    <td style="color:white;">{{ order_detail.quantity }}</td>
                    <td style="color:white;">INR &nbsp{{ order_detail.sold_at_price }}.00</td>
                    <td style="color:white;">
                        <select name="item_status">
                            {% for choice in order_detail.item_status_choices %}
                                <option value="{{ choice.0 }}" {% if choice.0 == order_detail.item_order_status %}selected{% endif %}>{{ choice.1 }}</option>
                            {% endfor %}
                        </select>
                    </td>
                    <td style="color:white;"><button type="submit" class="btn btn-success">Save</button></td>
                    <td style="color:white;">
                        {% if order_detail.cancel_req and not order_detail.item_order_status == 'Cancelled' %}
                            <div style="display:flex; flex-direction:column;">
                                <div class="badge badge-danger">Cancellation requested</div>
                            </div>
                        {% else %}
                            <div class="badge badge-outline-warning">{{ order_detail.item_order_status }}</div>
                        {% endif %}
                    </td>
                </tr>
                    </form>
{% endfor %}
            </table>
            <div class="card-body" style=>
              <h4 class="card-title">Order Details</h4>
              {% comment %} {% for order in orders %} {% endcomment %}
              <div class="order-details">
                  <div style="padding:5px"><strong>User:</strong> {{ order.user.name }}</div>
                  <div style="padding:5px"><strong>Address:</strong> 
                  <br>  
                  <div style="padding:5px">
                  {{ order.order_address.address_line1 }} , {{ order.order_address.address_line2 }}
                  <br>
                  {{ order.order_address.city }} , {{ order.order_address.state }} , {{ order.order_address.country }}
                  <br>
                  </div></div>
                  <div style="padding:5px;"><strong>Payment Method:</strong> {{ order.get_payment_type_display }}</div>
                  <div style="padding:5px"><strong>Order date:</strong> {{ order.order_date }}</div>
                  <div style="padding:5px"><strong>Discount:</strong> {% if order.coupon_discount %}{{ order.discount }}{% else %}N/A{% endif %}</div>
                  <div style="padding:5px"><strong>Order amount:</strong> {{ order.order_total_price }}</div>
              </div>
              {% comment %} {% endfor %} {% endcomment %}
          </div>
          
        </div>
      </div>
    </div>
  </div>

{% endblock dashboard %}