{% extends 'customadmin/base.html'%}
{% load static %}
{% block products-active %}active {% endblock %}

{% block dashboard %}
<div class="content-wrapper">
    <div class="page-header">
        <h3 class="page-title"> Products </h3>
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
                +Add Products
              </button></a></li>
          </ol>
        </nav>
      </div>
    <!-- Nav category -->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Product</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
              <form action="{% url 'add_products' %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <label for="productCategory">Category:</label><br>
                <select id="productCategory" name="category" required>
                {% for category in categories %}
                <option value="{{ category.id }}">{{ category.name }}</option>
                {% endfor %}
                </select> <br> 

                <label for="productName">Product Name:</label><br>
                <input type="text" id="productName" name="name" required> <br>

                <label for="productQuantity">Quantity:</label><br>
                <input type="number" id="productQuantity" name="quantity" required> <br>

                <label for="productOriginalPrice">Original Price:</label><br>
                <input type="number" step="0.01" id="productOriginalPrice" name="original_price" required> <br>

                <label for="productSellingPrice">Selling Price:</label><br>
                <input type="number" step="0.01" id="productSellingPrice" name="selling_price" required> <br>

                <label for="productDescription">Description:</label><br>
                <textarea id="productDescription" name="description" required></textarea> <br>
        
                <label for="productImage">Product Images:</label>
                <input type="file" id="productImage" name="image"  accept="image/*" multiple required> 
          
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Add Product</button>
          
        </form>
          </div>
        </div>
      </div>
    </div>
    
      
      <!-- nav category ends -->
    
      <table class="table table-dark">
        <thead>
          <tr>
            <th scope="col">NO.</th>
            <th scope="col">Product</th>
            <th scope="col">Stock</th>
            <th scope="col">MRP</th>
            <th scope="col">Selling price</th>
            <th scope="col">Images</th>
          </tr>
        </thead>
        <tbody>
        
            {% for product in products %}
            <tr>
              <th scope="row">{{ forloop.counter }}</th>
              <td>{{product.name }}</td>
              <td>{{product.quantity }}</td>
              <td>{{product.original_price }}</td>
              <td>{{product.selling_price }}</td>
              <td>
                {% for image in product.productimage_set.all %}
                    <img src="{{ image.product_image.url }}">
                {% endfor %}
              </td>

            <td>
            <a href="#" class="btn btn-primary" data-toggle="modal" data-target="#editModal{{ product.id }}">
                Edit
            </a>
        </td>
        <td>
            <a href="#" onclick="return confirm('Are you sure you want to delete?');" class="text-danger">Delete</a>
        </td>
    </tr>
{% endfor %}
          </tbody>
        </table>
        
      
      
        {% for product in products %}
        <div class="modal fade" id="editModal{{ product.id }}" tabindex="-1" role="dialog" aria-labelledby="editModal{{ product.id }}Title" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editModal{{ product.id }}Title">Edit Product</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!-- Add the form fields for editing the product -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
      {% endblock dashboard %}
      